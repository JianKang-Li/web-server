(function(){"use strict";var t={4405:function(t,e,s){var a=s(6369),n=(s(6699),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("UpLoad"),e("el-table",{staticStyle:{width:"100%"},attrs:{data:this.$store.state.menu}},[e("el-table-column",{attrs:{prop:"index",label:"序号"}}),e("el-table-column",{attrs:{prop:"filename",label:"文件名","min-width":"120","show-overflow-tooltip":!0}}),e("el-table-column",{attrs:{label:"下载"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("a",{attrs:{download:s.row.filename,href:"./public/files/"+s.row.filename}},[t._v("下载")])]}}])}),e("el-table-column",{attrs:{label:"预览"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"primary",size:"default"},on:{click:function(e){return t.preview(s.row.filename,"/public/files/"+s.row.filename)}}},[t._v("预览")])]}}])}),e("el-table-column",{attrs:{label:"删除"},scopedSlots:t._u([{key:"default",fn:function(s){return[e("el-button",{attrs:{type:"danger",size:"default"},on:{click:function(e){return t.open(s.row.filename)}}},[t._v("删除")])]}}])})],1),e("div",[e("el-dialog",{attrs:{title:"预览窗口",visible:t.centerDialogVisible,width:"60%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e},close:t.Pclose}},[e("div",[this.pics.includes(this.type)?e("img",{staticClass:"perv",attrs:{src:t.url,alt:""}}):this.audios.includes(this.type)?e("audio",{ref:"audio",staticClass:"perv",attrs:{src:t.url,controls:""}}):this.videos.includes(this.type)?e("video",{ref:"video",staticClass:"perv",attrs:{src:t.url,controls:""}}):e("span",{staticClass:"perv"},[t._v("浏览器不支持此类型文件!")])])])],1)],1)}),r=[],o=s(6265),i=s.n(o);class l{constructor(){this._axios=i().create({})}}var u=new l;const c=()=>u._axios.get("/menu"),p=t=>u._axios.get("/delete?file="+t);var d=function(){var t=this,e=t._self._c;return e("div",{staticClass:"upload"},[e("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{drag:"",action:"","http-request":t.httpRequest,"auto-upload":!1,"on-progress":t.proUpdata,name:"file"}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),e("em",[t._v("点击上传")])])]),e("el-progress",{attrs:{id:"progress",percentage:t.percentage,format:t.format,status:t.status}}),e("el-button",{attrs:{type:"primary",size:"default"},on:{click:t.submitUpload}},[t._v("上传")])],1)},f=[],h={data(){return{percentage:0,fileList:[],status:null}},methods:{format(t){return`${t}%`},submitUpload(){this.$refs.upload.submit()},proUpdata(t){console.log(t),this.percentage=parseInt(t.percent),console.log(this.percentage),this.percentage>=100&&(this.percentage=100,setTimeout((()=>{this.percentage=0}),1e3))},httpRequest(t){var e=new FormData;e.append("filename",t.file),u._axios({method:"post",url:"/upload",data:e,onUploadProgress:t=>{const e=parseInt(t.loaded/t.total*100);this.percentage=e}}).then((t=>{200===t.data.status?(this.$notify({title:"成功",message:"文件上传成功",type:"success"}),setTimeout((()=>{this.percentage=0}),1e3),c().then((t=>{this.$store.dispatch("updata",t.data)}))):this.$notify.error({title:"错误",message:t.data.message}),this.$refs.upload.clearFiles()})).catch((t=>{console.log(t)}))}},watch:{status(){return 100===this.percentage?"success":""}}},m=h,g=s(1001),v=(0,g.Z)(m,d,f,!1,null,"76d058f2",null),b=v.exports,y={name:"App",components:{UpLoad:b},data(){return{url:"",centerDialogVisible:!1,type:"",pics:["jpg","png","webp","jpeg","bmp","gif","apng","avif","ico"],audios:["mp3","ogg","wav"],videos:["mp4","webm"]}},methods:{getMenu(){c().then((t=>{this.$store.dispatch("updata",t.data)}))},Pclose(){this.$refs.audio?this.$refs.audio.pause():this.$refs.video&&this.$refs.video.pause()},preview(t,e){let s=t.match(/\.\w*$/g)[0];this.type=s.replace(".",""),this.Dev?this.url=this.globalUrl+e:this.url=e,this.centerDialogVisible=!0},open(t){this.$confirm(`此操作将永久删除${t}, 是否继续?`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{p(t).then((t=>{this.$message({type:"success",message:`${t.data}`})})).catch((t=>{this.$message({type:"warning",message:`${t}`})})),this.getMenu()})).catch((()=>{this.$message({type:"info",message:"已取消删除"})}))}},mounted(){this.getMenu(),window.timer=setInterval((()=>{setTimeout(this.getMenu(),3e3)}),1e3)},beforeDestroy(){clearInterval(window.timer)}},w=y,_=(0,g.Z)(w,n,r,!1,null,"10b9c9c4",null),$=_.exports,x=s(8499),O=s.n(x),k=s(3822);a["default"].use(k.ZP);const j=new k.ZP.Store({state:{menu:[]},actions:{updata(t,e){t.commit("flash",e)}},mutations:{flash(t,e){t.menu=e}}});var C=j;a["default"].config.productionTip=!1,a["default"].prototype.globalUrl="http://127.0.0.1:8888",a["default"].prototype.Dev=!1,a["default"].use(O()),new a["default"]({render:t=>t($),store:C}).$mount("#app")}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var r=e[a]={exports:{}};return t[a](r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,r){if(!a){var o=1/0;for(c=0;c<t.length;c++){a=t[c][0],n=t[c][1],r=t[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(i=!1,r<o&&(o=r));if(i){t.splice(c--,1);var u=n();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[a,n,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,r,o=a[0],i=a[1],l=a[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(n in i)s.o(i,n)&&(s.m[n]=i[n]);if(l)var c=l(s)}for(e&&e(a);u<o.length;u++)r=o[u],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(c)},a=self["webpackChunkairdrop"]=self["webpackChunkairdrop"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(4405)}));a=s.O(a)})();
//# sourceMappingURL=app.a62941a5.js.map